function VanillaCalendar(element,scedule){return{month:element.querySelectorAll('[data-calendar-area="month"]')[0],next:element.querySelectorAll('[data-calendar-toggle="next"]')[0],previous:element.querySelectorAll('[data-calendar-toggle="previous"]')[0],label:element.querySelectorAll('[data-calendar-label="month"]')[0],activeDates:null,date:new Date,todaysDate:new Date,init:function(options){this.options=options,this.date.setDate(1),this.createMonth(),this.createListeners()},createListeners:function(){var _this=this;this.next.addEventListener("click",function(){_this.clearCalendar();var nextMonth=_this.date.getMonth()+1;_this.date.setMonth(nextMonth),_this.createMonth()}),this.previous.addEventListener("click",function(){_this.clearCalendar();var prevMonth=_this.date.getMonth()-1;_this.date.setMonth(prevMonth),_this.createMonth()})},createDay:function(num,day,year){var newDay=document.createElement("div"),dateEl=document.createElement("span");dateEl.innerHTML=num,newDay.className="vcal-date",newDay.setAttribute("data-calendar-date",this.date.yyyymmdd()),1===num&&(newDay.style.marginLeft=0===day?6*14.28+"%":14.28*(day-1)+"%"),this.options.disablePastDays&&this.date.getTime()<=this.todaysDate.getTime()-1?newDay.classList.add("vcal-date--disabled"):(newDay.classList.add("vcal-date--active"),newDay.setAttribute("data-calendar-status","active")),this.date.toString()===this.todaysDate.toString()&&newDay.classList.add("vcal-date--today"),newDay.appendChild(dateEl),this.month.appendChild(newDay)},dateClicked:function(){var _this=this;this.activeDates=element.querySelectorAll('[data-calendar-status="active"]');for(var i=0;i<this.activeDates.length;i++)this.activeDates[i].addEventListener("click",function(event){_this.removeActiveClass(),this.classList.add("vcal-date--selected"),schedule.initDate(this.dataset.calendarDate)})},createMonth:function(){for(var currentMonth=this.date.getMonth();this.date.getMonth()===currentMonth;)this.createDay(this.date.getDate(),this.date.getDay(),this.date.getFullYear()),this.date.setDate(this.date.getDate()+1);this.date.setDate(1),this.date.setMonth(this.date.getMonth()-1),this.label.innerHTML=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear(),this.dateClicked()},monthsAsString:function(monthIndex){return["January","Febuary","March","April","May","June","July","August","September","October","November","December"][monthIndex]},clearCalendar:function(){this.month.innerHTML=""},removeActiveClass:function(){for(var i=0;i<this.activeDates.length;i++)this.activeDates[i].classList.remove("vcal-date--selected")}}}function Schedule(element,storage,onaddclick,onviewclick,ondeleteclick){var _id=void 0,_date=void 0;return{table:element.querySelectorAll(".schedule-table")[0],initId:function(id){_id=id,this.init()},initDate:function(date){_date=date,this.init()},init:function(){var bookings=storage.getBookings(_id,_date);this.generate(bookings)},generate:function(bookings){console.log(bookings);var self=this;this.table.innerHTML="";var hours=["10","11","12","13","14","15","16","17","18","19"],minutes=["00","15","30","45"],row=document.createElement("tr"),col=document.createElement("td");row.appendChild(col),minutes.forEach(function(minute){var col=document.createElement("td");col.classList.add("bookingTime"),col.innerText=minute,row.appendChild(col)}),this.table.appendChild(row),hours.forEach(function(hour){var row=document.createElement("tr"),col=document.createElement("td");col.classList.add("bookingTime"),col.innerText=hour,row.appendChild(col),minutes.forEach(function(minute){var col=document.createElement("td");col.classList.add("info");for(var booking=null,i=0;null==booking&&i<bookings.length;i++)bookings[i].hour==hour&&bookings[i].minute==minute&&(booking=bookings[i]);if(null==booking){var btn;(btn=document.createElement("a")).href="#",btn.innerText="Free",btn.onclick=function(){return onaddclick(_id,_date,hour,minute),!1},col.appendChild(btn)}else{if(onviewclick){var btn;(btn=document.createElement("a")).href="#",btn.innerText="Busy",btn.onclick=function(){return onviewclick(_id,_date,hour,minute),!1},col.appendChild(btn)}else{var span=document.createElement("span");span.innerText="Busy",col.appendChild(span)}if(ondeleteclick){var btn;(btn=document.createElement("a")).href="#",btn.onclick=function(){return ondeleteclick(_id,_date,hour,minute),!1},btn.classList.add("icon");var icon=document.createElement("i");icon.classList.add("fas"),icon.classList.add("fa-trash"),btn.appendChild(icon),col.appendChild(btn)}}row.appendChild(col)}),self.table.appendChild(row)})}}}function Storage(){var loadItems,saveItems=function(items){localStorage.setItem("schedules",JSON.stringify(items))},items=function(){return JSON.parse(localStorage.getItem("schedules"))}()||[];return{getBookings:function(id,date){return console.log("getBookings(",id,", ",date,")"),items.filter(function(i){return i.id==id&&(!date||i.date==date)})},getBooking:function(id,date,hour,minute){console.log("getBookings(",id,", ",date,")");var bookings=items.filter(function(i){return i.id==id&&i.date==date&&i.hour==hour&&i.minute==minute});return bookings.length>0?bookings[0]:{}},addBooking:function(id,date,hour,minute,name,lastName,phone){return console.log("addBooking(",id,", ",date,")"),!items.some(function(item){return item.phone==phone})&&(items.push({id:id,date:date,hour:hour,minute:minute,phone:phone,name:name,lastName:lastName}),saveItems(items),!0)},deleteBooking:function(id,date,hour,minute){console.log("deleteBooking(",id,", ",date,", ",hour,", ",minute,")"),items=items.filter(function(item){return!(item.id==id&&item.date==date&&item.hour==hour&&item.minute==minute)}),saveItems(items)}}}function formValidation(){let phone=document.getElementById("new-reservation-phone"),filterPhone,phoneErrorText="Number should start from 8 and to have 9 digits";return!!/^8\d{8}$/.test(phone.value)||(document.getElementById("errorMessage").innerHTML=phoneErrorText,phone.focus(),!1)}Date.prototype.yyyymmdd=function(){var mm=this.getMonth()+1,dd=this.getDate();return[this.getFullYear(),mm>9?""+mm:"0"+mm,dd>9?""+dd:"0"+dd].join("-")};